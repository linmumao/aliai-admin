(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2493cf4d"],{"1a31":function(e,t,r){},9835:function(e,t,r){"use strict";r("1a31")},d6b9:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"allPage themeBgc"},[r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{staticClass:"myColor",attrs:{to:{path:"/addweb/productM/upstreamM"}}},[e._v("上游管理 ")]),r("el-breadcrumb-item",{directives:[{name:"show",rawName:"v-show",value:"-1"==e.editStatus,expression:"editStatus == '-1'"}]},[e._v("新增上游")]),r("el-breadcrumb-item",{directives:[{name:"show",rawName:"v-show",value:"-1"!==e.editStatus,expression:"editStatus !== '-1'"}]},[e._v("编辑上游")])],1)],1),r("div",{staticClass:"bigBox"},[e._m(0),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{staticStyle:{"margin-top":"0.941176rem"},attrs:{label:"上游名称：",prop:"upName"}},[r("el-input",{staticClass:"miniInput",attrs:{maxlength:"35"},model:{value:e.form.upName,callback:function(t){e.$set(e.form,"upName","string"===typeof t?t.trim():t)},expression:"form.upName"}})],1),r("el-form-item",{attrs:{label:"上游简称：",prop:"upNameShort"}},[r("el-input",{staticClass:"miniInput",attrs:{maxlength:"35"},model:{value:e.form.upNameShort,callback:function(t){e.$set(e.form,"upNameShort","string"===typeof t?t.trim():t)},expression:"form.upNameShort"}})],1),r("el-form-item",{attrs:{label:"上游类型：",prop:"upType"}},[r("el-select",{staticClass:"miniInput",staticStyle:{},attrs:{placeholder:"请选择"},model:{value:e.form.upType,callback:function(t){e.$set(e.form,"upType","string"===typeof t?t.trim():t)},expression:"form.upType"}},e._l(e.typeList,(function(e,t){return r("el-option",{key:e.upTypeId,attrs:{label:e.typeName,value:e.upTypeId}})})),1)],1),r("el-form-item",{attrs:{label:"联系人姓名：",prop:"linkMan"}},[r("el-input",{staticClass:"miniInput",attrs:{maxlength:"10"},model:{value:e.form.linkMan,callback:function(t){e.$set(e.form,"linkMan","string"===typeof t?t.trim():t)},expression:"form.linkMan"}})],1),r("el-form-item",{attrs:{label:"联系人电话：",prop:"phone"}},[r("el-input",{staticClass:"miniInput",attrs:{maxlength:"11"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"===typeof t?t.trim():t)},expression:"form.phone"}})],1),r("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[r("el-input",{staticClass:"miniInput",attrs:{maxlength:"50"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks","string"===typeof t?t.trim():t)},expression:"form.remarks"}})],1),r("el-form-item",{attrs:{label:"上游logo：",prop:"logo"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.homeUrl+"docking/open/file","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?r("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),r("div",{staticClass:"boxFooter flex_d_center"},[r("el-button",{on:{click:e.goBack}},[e._v("返回")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:"-1"==e.editStatus,expression:"editStatus == '-1'"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:"-1"!==e.editStatus,expression:"editStatus !== '-1'"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1)])},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"right2 flex_r_ic",staticStyle:{"margin-top":"0px"}},[r("div",{staticClass:"fontS_m fontW_b fontC_303133",staticStyle:{"margin-left":"24px","margin-top":"24px"}},[e._v("基本信息")])])}],a=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("e072")),i=r("4b90"),l={data:function(){var e=function(e,t,r){if(""===t)r(new Error("请输入联系电话"));else{var o=null,s=/^1(3|4|5|6|7|8|9)\d{9}$/,a=/^(0[0-9]{2,3})([2-9][0-9]{4,7})+(\-[0-9]{1,4})?$/;if(o=0==t.charAt(0)?a:s,!o.test(t))return r(new Error("请填写正确的联系电话"));r()}},t=function(e,t,r){if(""===t)r(new Error("请输入联系人姓名"));else{var o=/[^\u4E00-\u9FA5]/g;if(o.test(t))return r(new Error("联系人姓名只能为中文"));r()}};return{editStatus:"-1",typeList:"",orgTreeList:[],homeUrl:"",form:{linkMan:"",logo:"",phone:"",remarks:"",upName:"",upNameShort:"",upType:""},value:"",imageUrl:"",rules:{linkMan:[{required:!0,validator:t,trigger:"blur"}],phone:[{required:!0,validator:e,trigger:"blur"}],upName:[{required:!0,message:"请输入上游名称",trigger:"blur"}],upNameShort:[{required:!0,message:"请输入上游简称",trigger:"blur"}],upType:[{required:!0,message:"请选择上游类型",trigger:"blur"}],latitude:[{required:!0,message:"请输入纬度",trigger:"blur"},{pattern:/^(\+)?([0-8]?\d{1}\.\d{0,6}|90\.0{0,6}|[0-8]?\d{1}|90)$/,message:"纬度整数部分为0-90,小数部分为0到6位!",trigger:"blur"}]}}},created:function(){var e=this;this.homeUrl=i["a"],this.editStatus=this.$route.query.upMangerId,Object(a["tb"])().then((function(t){console.log("查询类型下拉:",t),0==t.code?e.typeList=t.list:e.$message.error(t.msg)})),"-1"!==this.editStatus&&Object(a["qb"])({id:this.editStatus}).then((function(t){console.log("数据回显:",t),0==t.code?(e.form=t.data,e.imageUrl=e.form.logo):e.$message.error(t.msg)}))},methods:{goBack:function(){this.$router.go(-1)},saveUser:function(){var e=this;console.log(this.form),Object(a["pb"])(this.form).then((function(t){console.log("保存:",t),0==t.code?e.$message.success("保存成功"):e.$message.error(t.msg)}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;console.log(e),console.log(t.form),"-1"==t.editStatus?Object(a["pb"])(t.form).then((function(e){console.log("保存:",e),0==e.code?(t.$message.success("保存成功"),t.$router.go(-1)):t.$message.error(e.msg)})):Object(a["rb"])(t.form).then((function(e){console.log("编辑:",e),0==e.code?(t.$message.success("编辑成功"),t.$router.go(-1)):t.$message.error(e.msg)}))}))},handleAvatarSuccess:function(e,t){console.log(e),console.log(t),0==e.code&&(this.form.logo=e.url,this.imageUrl=URL.createObjectURL(t.raw))},beforeAvatarUpload:function(e){var t=e.size/1024/1024<1;console.log(e.type);var r="image/jpeg"===e.type,o="image/png"===e.type;return t&&r||t&&o?console.log("222222"):this.$message.error("上传头像只能是PNG或JPG格式，并且不能大于1M"),console.log(r&&t||o&&t),t&&r||t&&o}},mounted:function(){}},n=l,u=(r("9835"),r("2877")),m=Object(u["a"])(n,o,s,!1,null,"4e00408a",null);t["default"]=m.exports}}]);