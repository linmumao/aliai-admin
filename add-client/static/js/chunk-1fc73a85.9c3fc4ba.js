(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fc73a85"],{"12c7":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"allPage themeBgc"},[s("div",[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{staticClass:"myColor",attrs:{to:{path:"/addweb/systemManagement/organizationManagement"}}},[e._v("机构管理 ")]),s("el-breadcrumb-item",{directives:[{name:"show",rawName:"v-show",value:0==e.editStatus,expression:"editStatus == 0"}]},[e._v("添加机构")]),s("el-breadcrumb-item",{directives:[{name:"show",rawName:"v-show",value:1==e.editStatus,expression:"editStatus == 1"}]},[e._v("编辑机构")])],1)],1),s("div",{staticClass:"bigBox"},[e._m(0),s("div",{staticClass:"right2 flex_r_ic",staticStyle:{"margin-top":"30.5px"}},[e._m(1),s("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.homeUrl+"docking/open/file","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?s("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),s("div",{staticClass:"right2 flex_r_ic"},[e._m(2),s("el-input",{staticClass:"miniInput",attrs:{maxlength:"35",placeholder:"请输入内容"},model:{value:e.form.orgName,callback:function(t){e.$set(e.form,"orgName","string"===typeof t?t.trim():t)},expression:"form.orgName"}})],1),s("div",{staticClass:"right2 flex_r_ic"},[s("div",{staticClass:"leftminiBox flex_rend_c"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.editStatus,expression:"editStatus==0"}],staticClass:"miniStar"},[e._v("*")]),s("div",{staticClass:"miniText"},[e._v("隶属机构：")])]),1==e.editStatus&&0!=e.form.editable?s("div",{staticStyle:{"margin-left":"0.705882rem"}},[s("selectTree",{attrs:{TreeList:e.orgTreeList,id:e.form.parentId,label:e.form.parentName,TreeWidth:"14.117647rem"},on:{MtreeData:e.MtreeData3}})],1):s("el-input",{staticClass:"miniInput",attrs:{disabled:"",maxlength:"35",placeholder:"请输入内容"},model:{value:e.form.parentName,callback:function(t){e.$set(e.form,"parentName","string"===typeof t?t.trim():t)},expression:"form.parentName"}})],1),s("div",{staticClass:"right2 flex_r_ic"},[e._m(3),s("el-select",{staticClass:"miniInput",attrs:{placeholder:"请选择"},model:{value:e.form.tradeId,callback:function(t){e.$set(e.form,"tradeId",t)},expression:"form.tradeId"}},e._l(e.tradeList,(function(e){return s("el-option",{key:e.tradeId,attrs:{label:e.tradeName,value:e.tradeId}})})),1)],1),s("div",{staticClass:"right2 flex_r"},[e._m(4),s("div",{staticClass:"NewRoleSz flex_r_fw"},e._l(e.NewRoleList,(function(t,o){return s("div",{key:o,staticClass:"NewMiniRole flex_r_ic"},[s("img",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"item.isVisible"}],staticClass:"RoleImg",attrs:{src:i("190f")},on:{click:function(i){return e.changeVis(t)}}}),s("img",{directives:[{name:"show",rawName:"v-show",value:!t.isVisible,expression:"!item.isVisible"}],staticClass:"RoleImg",attrs:{src:i("84fb")},on:{click:function(i){return e.changeVis(t)}}}),s("span",{staticClass:"RoleText"},[e._v(e._s(t.roleName))])])})),0)]),s("div",{staticClass:"right2 flex_r_ic",staticStyle:{"margin-top":"15px"}},[e._m(5),s("el-select",{staticClass:"miniInput2",staticStyle:{"margin-left":"0.705882rem"},attrs:{placeholder:"请选择"},on:{change:e.changePro2},model:{value:e.form.provinceId,callback:function(t){e.$set(e.form,"provinceId",t)},expression:"form.provinceId"}},e._l(e.provinceList,(function(e){return s("el-option",{key:e.provinceId,attrs:{label:e.provinceName,value:e.provinceId}})})),1),s("el-select",{staticClass:"miniInput2",staticStyle:{"margin-left":"0.441176rem"},attrs:{placeholder:"请选择"},on:{change:e.changeCity2},model:{value:e.form.cityId,callback:function(t){e.$set(e.form,"cityId",t)},expression:"form.cityId"}},e._l(e.cityList,(function(e){return s("el-option",{key:e.cityId,attrs:{label:e.cityName,value:e.cityId}})})),1),s("el-select",{staticClass:"miniInput2",staticStyle:{"margin-left":"0.441176rem"},attrs:{placeholder:"请选择"},model:{value:e.form.urbanId,callback:function(t){e.$set(e.form,"urbanId",t)},expression:"form.urbanId"}},e._l(e.urbanList,(function(e){return s("el-option",{key:e.urbanId,attrs:{label:e.urbanName,value:e.urbanId}})})),1)],1),s("div",{staticClass:"right2 flex_r_ic"},[e._m(6),s("el-input",{staticClass:"miniInput",attrs:{maxlength:"50",placeholder:"请输入内容"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address","string"===typeof t?t.trim():t)},expression:"form.address"}})],1),s("div",{staticClass:"boxFooter flex_d_center"},[s("el-button",{on:{click:e.cancelOrg}},[e._v("返回")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.editStatus,expression:"editStatus == 0"}],attrs:{type:"primary"},on:{click:e.saveOrg}},[e._v("提交")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.editStatus,expression:"editStatus == 1"}],attrs:{type:"primary"},on:{click:e.saveOrg}},[e._v("保存")])],1)])])},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"right2 flex_r_ic",staticStyle:{"margin-top":"0px"}},[i("div",{staticClass:"fontS_m fontW_b fontC_303133",staticStyle:{"margin-left":"24px","margin-top":"24px"}},[e._v("基本信息")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"leftminiBox flex_rend_c"},[i("div",{staticClass:"miniStar"},[e._v("*")]),i("div",{staticClass:"miniText"},[e._v("机构logo：")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"leftminiBox flex_rend_c"},[i("div",{staticClass:"miniStar"},[e._v("*")]),i("div",{staticClass:"miniText"},[e._v("机构名称：")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"leftminiBox flex_rend_c"},[i("div",{staticClass:"miniStar"},[e._v("*")]),i("div",{staticClass:"miniText"},[e._v("行业类型：")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"leftminiBox flex_rend"},[i("div",{staticClass:"miniStar"},[e._v("*")]),i("div",{staticClass:"miniText"},[e._v("角色类型：")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"leftminiBox flex_rend_c"},[i("div",{staticClass:"miniStar"},[e._v("*")]),i("div",{staticClass:"miniText"},[e._v("机构地址：")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"leftminiBox flex_rend_c"},[i("div",{staticClass:"miniStar"},[e._v("*")]),i("div",{staticClass:"miniText"},[e._v("详细地址：")])])}],r=(i("d3b7"),i("3ca3"),i("ddb0"),i("159b"),i("d81d"),i("ac1f"),i("5319"),i("2b3d"),i("e072")),a=i("4b90"),n=function(){return i.e("chunk-30404e9b").then(i.bind(null,"9dfb"))},l={components:{selectTree:n},data:function(){return{editStatus:0,orgTreeList:[],NewRoleList:[],homeUrl:"",form:{address:"",cityId:"",logoUrl:"",orgName:"",parentId:"",provinceId:"",tradeId:"",urbanId:"",orgId:"",roleList:[]},options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],orgList:[],tradeList:[],provinceList:[],cityList:[],urbanList:[],value:"",imageUrl:""}},created:function(){var e=this;console.log("11111111111111111111"),console.log(this.$route.query.orgId),console.log("11111111111111111111"),console.log("homeUrl"),console.log(a["a"]),this.homeUrl=a["a"],console.log("homeUrl2"),console.log(this.homeUrl),Object(r["vb"])().then((function(t){console.log("res:",t),0==t.code?e.tradeList=t.tradeList:console.log(t.msg)})),this.$route.query.orgId?(this.editStatus=1,this.MqueryDetailByOrgId(this.$route.query.orgId)):(console.log(this.$route.query.orgIdadd),console.log(this.$route.query.orgNameadd),this.form.parentId=this.$route.query.orgIdadd,this.form.parentName=this.$route.query.orgNameadd,Object(r["d"])().then((function(t){console.log("角色信息:",t),0==t.code&&(e.NewRoleList=t.roleList,e.NewRoleList.forEach((function(t){e.$set(t,"isVisible",!0)})))}))),Object(r["Q"])().then((function(t){console.log("Treeres:",t),0==t.code?(console.log("-------------------------"),console.log(t.orgTree),console.log(e.orgTreeList),e.orgTreeList.push(t.orgTree),console.log(e.orgTreeList),console.log("-------------------------")):console.log(t.msg)})),Object(r["Y"])().then((function(t){console.log("res:",t),0==t.code?e.provinceList=t.provinceList:console.log(t.msg)}))},methods:{changeVis:function(e){var t=0;this.NewRoleList.map((function(e){e.isVisible&&t++})),1==t&&e.isVisible?this.$message.error("至少分配一个角色"):e.isVisible=!e.isVisible},MqueryDetailByOrgId:function(e){var t=this;Object(r["T"])({orgId:e}).then((function(e){console.log("res6546+46465456456456:",e),0==e.code?(t.imageUrl=e.orgDetail.logoUrl,t.form=e.orgDetail,t.changePro(),t.changeCity()):console.log(e.msg)})),Object(r["V"])({orgId:e}).then((function(e){console.log("角色信息77777777777777777:",e),0==e.code&&(t.NewRoleList=e.roleList,t.NewRoleList.forEach((function(e){t.$set(e,"isVisible",!0)})))}))},MtreeData3:function(e){var t=this;console.log(e),this.form.parentId=e.id,Object(r["W"])({orgId:this.form.parentId}).then((function(e){console.log("角色信息----------------------------------:",e),0==e.code&&(t.NewRoleList=e.roleList,t.NewRoleList.forEach((function(e){t.$set(e,"isVisible",!0)})))}))},changeCity:function(e){var t=this;console.log(e),Object(r["ab"])({cityId:this.form.cityId}).then((function(e){console.log("角色信息:",e),0==e.code?t.urbanList=e.urbanList:console.log(e.msg)}))},changeCity2:function(e){var t=this;console.log(e),Object(r["ab"])({cityId:this.form.cityId}).then((function(e){console.log("角色信息:",e),0==e.code?(t.urbanList=e.urbanList,t.form.urbanId=t.urbanList[0].urbanId):console.log(e.msg)}))},changePro:function(e){var t=this;console.log(e),Object(r["S"])({provinceId:this.form.provinceId}).then((function(e){console.log("cityList:",e),0==e.code?t.cityList=e.cityList:console.log(e.msg)}))},changePro2:function(e){var t=this;console.log(e),Object(r["S"])({provinceId:this.form.provinceId}).then((function(e){console.log("cityList:",e),0==e.code?(t.cityList=e.cityList,t.form.cityId=t.cityList[0].cityId,Object(r["ab"])({cityId:t.form.cityId}).then((function(e){console.log("角色信息:",e),0==e.code?(t.urbanList=e.urbanList,t.form.urbanId=t.urbanList[0].urbanId):console.log(e.msg)}))):console.log(e.msg)}))},cancelOrg:function(){this.$router.go(-1)},saveOrg:function(){var e=this;console.log(this.form),this.form.roleList=[];var t=[];this.NewRoleList.map((function(i){i.isVisible&&(e.form.roleList.push(i),t.push({roleId:i.roleId}))})),console.log(t),console.log(this.form.roleList),this.form.roleIdList=t,this.form.orgName=this.form.orgName.replace(/ /g,""),this.form.address=this.form.address.replace(/ /g,""),console.log(this.form),0==this.editStatus?Object(r["N"])(this.form).then((function(t){console.log("保存机构:",t),0==t.code?(e.$message.success("保存成功"),e.imageUrl="",e.form={address:"",cityId:"",logoUrl:"",orgName:"",parentId:"",provinceId:"",tradeId:"",urbanId:""},e.$router.go(-1)):e.$message.error(t.msg)})):Object(r["R"])(this.form).then((function(t){console.log("保存修改机构:",t),0==t.code?(e.$message.success("保存成功"),e.$router.go(-1)):e.$message.error(t.msg)}))},handleAvatarSuccess:function(e,t){console.log(e),console.log(t),0==e.code&&(this.form.logoUrl=e.url,this.imageUrl=URL.createObjectURL(t.raw))},beforeAvatarUpload:function(e){var t=e.size/1024/1024<1;console.log(e.type);var i="image/jpeg"===e.type,s="image/png"===e.type;return t&&i||t&&s?console.log("222222"):this.$message.error("上传头像只能是PNG或JPG格式，并且不能大于1M"),console.log(i&&t||s&&t),t&&i||t&&s}},mounted:function(){}},c=l,d=(i("faee"),i("2877")),m=Object(d["a"])(c,s,o,!1,null,"507d8ab0",null);t["default"]=m.exports},"159b":function(e,t,i){var s=i("da84"),o=i("fdbc"),r=i("17c2"),a=i("9112");for(var n in o){var l=s[n],c=l&&l.prototype;if(c&&c.forEach!==r)try{a(c,"forEach",r)}catch(d){c.forEach=r}}},"17c2":function(e,t,i){"use strict";var s=i("b727").forEach,o=i("a640"),r=o("forEach");e.exports=r?[].forEach:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}},"190f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAVCAYAAABCIB6VAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACnSURBVEhLY1hz/v9/zab//8XKKccgc0DmgQADtQyFYZB5YIOxSVKKRw2G48FnsHk3dnEYJstgkKF3Xv//n7gYuzwIk2wwzNDazdjlYRivwfGLUPnEGgrCOA12nvj//4uP//8XroHwSTEUhHEaDMIww1t3kGYoCOM1GITjFv7//+fv//8bLmKXx4UJGgzC6cuwi+PDRBlMDh41GI7BBtOsBqFNnff/PwAl8Mxe+OQtlQAAAABJRU5ErkJggg=="},"84fb":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAUJJREFUWEftmDFKBDEUhl8yjYJbDi/kAtq73sBSQQ8jeAMb76KgpTdQe/cCISGlA26TRCIZWGdnM0XIsOJLO0nex5f3ivkZ7Plie84HBFj6QqMGrbXHzrl7ADhnjB2UFpk43wHAC+f8tm3b1XDvFmCE896/AcBRZbDh9R3nfDmE3AI0xjwAwNXMcD/lQgjPQojLzdpjgJ+9PefcmZQy2qy2lFLLpmleE+BaCHE4BRj6DYg4y5QbY3bWHDNIgMN+IYOlE0QGyeCmgVw/lJradZ56sNQsGSSDNMUTPUBDQkNCQ0JDUjoF/8qg1vqrz2NSFPFeU6C19jRFLbFMh4iL7I+71vqJMXZREypz9yMiXmcBlVInKYqYPTxKUctHFjB+TJB3MX6rnXKFENYxfvPe30gpf8FFllmyl5J2IcASe3/iib8BE1ATOGqb7AMAAAAASUVORK5CYII="},a640:function(e,t,i){"use strict";var s=i("d039");e.exports=function(e,t){var i=[][e];return!!i&&s((function(){i.call(null,t||function(){throw 1},1)}))}},b727:function(e,t,i){var s=i("0366"),o=i("44ad"),r=i("7b0b"),a=i("50c4"),n=i("65f0"),l=[].push,c=function(e){var t=1==e,i=2==e,c=3==e,d=4==e,m=6==e,u=7==e,f=5==e||m;return function(g,v,h,p){for(var b,I,A=r(g),_=o(A),y=s(v,h,3),C=a(_.length),x=0,w=p||n,L=t?w(g,C):i||u?w(g,0):void 0;C>x;x++)if((f||x in _)&&(b=_[x],I=y(b,x,A),e))if(t)L[x]=I;else if(I)switch(e){case 3:return!0;case 5:return b;case 6:return x;case 2:l.call(L,b)}else switch(e){case 4:return!1;case 7:l.call(L,b)}return m?-1:c||d?d:L}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},d81d:function(e,t,i){"use strict";var s=i("23e7"),o=i("b727").map,r=i("1dde"),a=r("map");s({target:"Array",proto:!0,forced:!a},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},dcf4:function(e,t,i){},faee:function(e,t,i){"use strict";i("dcf4")}}]);